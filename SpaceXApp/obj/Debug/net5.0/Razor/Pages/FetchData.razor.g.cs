#pragma checksum "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "61c1c6e4c81735de4ecd7fc0e8d58e3bffe50df7"
// <auto-generated/>
#pragma warning disable 1591
namespace SpaceXApp.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using SpaceXApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\_Imports.razor"
using SpaceXApp.Shared;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/fetchdata")]
    public partial class FetchData : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<h1 class=\"text-center text-white\">SpaceX Launches</h1>\r\n\r\n");
            __builder.AddMarkupContent(1, "<h6 class=\"text-center text-white\">Welcome astro enthusiasts!</h6>");
#nullable restore
#line 9 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
 if (launches == null)
{

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(2, "<p><em>Loading...</em></p>");
#nullable restore
#line 12 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
}
else
{
    

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
     foreach (var launch in launches)
    {
        if(launch.Payloads.Length > payloadCount)
        {
            payloadCount = launch.Payloads.Length;
        }
        orderedLaunches.Add(new SpaceXLaunches(launch.Date_utc, launch.Name, launch.Success, launch.Payloads));
        if (launch == launches[launches.Length - 1])
        {
            orderedLaunches = orderedLaunches.OrderByDescending(x => x.Date_utc).ToList();
        }
    }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(3, "table");
            __builder.AddAttribute(4, "class", "table table-light text-center");
            __builder.AddAttribute(5, "id", "data-table");
            __builder.OpenElement(6, "thead");
            __builder.OpenElement(7, "tr");
            __builder.AddMarkupContent(8, "<th>Date</th>\r\n                ");
            __builder.AddMarkupContent(9, "<th>Rocket Name</th>\r\n                ");
            __builder.AddMarkupContent(10, "<th>Results</th>\r\n                ");
            __builder.OpenElement(11, "th");
            __builder.AddAttribute(12, "class", "text-left");
            __builder.AddAttribute(13, "colspan", 
#nullable restore
#line 33 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                                                payloadCount

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(14, "Payloads Ranked by Mass (Highest to Lowest)");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(15, "\r\n        ");
            __builder.OpenElement(16, "tbody");
#nullable restore
#line 37 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
             foreach (var orderedLaunch in orderedLaunches)
            {
                launchPayloads.Clear();

#line default
#line hidden
#nullable disable
            __builder.OpenElement(17, "tr");
            __builder.OpenElement(18, "td");
            __builder.AddContent(19, 
#nullable restore
#line 41 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                         orderedLaunch.Date_utc.AddHours(-6)

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(20, "\r\n                    ");
            __builder.OpenElement(21, "td");
            __builder.AddContent(22, 
#nullable restore
#line 42 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                         orderedLaunch.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 43 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                     if (orderedLaunch.Success == true)
                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(23, "<td>Success!</td>");
#nullable restore
#line 46 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                    } else if(orderedLaunch.Date_utc.AddHours(-6) > DateTime.Today)
                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(24, "<td>TBD</td>");
#nullable restore
#line 49 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                    }
                    else
                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(25, "<td>Failed..</td>");
#nullable restore
#line 53 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 54 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                     foreach (var payload in orderedLaunch.Payloads)
                    {
                        foreach (var payloadDetail in payloadDetails)
                        {
                            if (payload == payloadDetail.Id)
                            {
                                launchPayloads.Add(new LaunchPayloads(payloadDetail.Id, payloadDetail.Mass_kg));
                                break;
                            }
                        }
                        if (payload == orderedLaunch.Payloads[orderedLaunch.Payloads.Length - 1])
                        {
                            launchPayloads = launchPayloads.Where(x => x.Mass_kg.HasValue).OrderBy(x => -x.Mass_kg).ToList();
                        }
                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 69 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                     foreach (var payload in launchPayloads)
                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(26, "td");
            __builder.AddContent(27, 
#nullable restore
#line 71 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                             payload.Mass_kg

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 72 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 74 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 77 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 79 "E:\Nathan-Programming-Stuff\Projects\SpaceXApp\SpaceXApp2\SpaceXApp\Pages\FetchData.razor"
       
    private SpaceXLaunches[] launches;
    List<SpaceXLaunches> orderedLaunches = new List<SpaceXLaunches>();
    private LaunchPayloads[] payloadDetails;
    List<LaunchPayloads> launchPayloads = new List<LaunchPayloads>();
    private int payloadCount = 1;

    protected override async Task OnInitializedAsync()
    {
        launches = await Http.GetFromJsonAsync<SpaceXLaunches[]>("https://api.spacexdata.com/v5/launches");
        payloadDetails = await Http.GetFromJsonAsync<LaunchPayloads[]>("https://api.spacexdata.com/v4/payloads");
    }

    public class SpaceXLaunches
    {
        public DateTime Date_utc { get; set; }

        public string Name { get; set; }

        public bool? Success { get; set; }

        public string[] Payloads { get; set; }

        public SpaceXLaunches(DateTime date_utc, string name, bool? success, string[] payloads)
        {
            this.Date_utc = date_utc;
            this.Name = name;
            this.Success = success;
            this.Payloads = payloads;
        }

        public override string ToString()
        {
            return "[" + Date_utc + ", " + Name + ", " + Success + ", " + Payloads + "]";
        }
    }

    public class LaunchPayloads
    {
        public string Id { get; set; }

        public float? Mass_kg { get; set; }

        public LaunchPayloads(string id, float? mass_kg)
        {
            this.Id = id;
            this.Mass_kg = mass_kg;
        }

        public override string ToString()
        {
            return "[" + Id + ", " + Mass_kg + "]";
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
